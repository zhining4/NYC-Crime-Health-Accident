<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | NYC-motor-accident</title>
  <meta name="description" content="Chapter 3 Data transformation | NYC-motor-accident" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | NYC-motor-accident" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | NYC-motor-accident" />
  
  
  

<meta name="author" content="Zhining Qiu &amp; Yunzhe Zhang" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYCMotorAccidentAnalysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#motor-vehicle-coliisions-dataset"><i class="fa fa-check"></i><b>2.1</b> Motor Vehicle Coliisions dataset</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-sources.html"><a href="data-sources.html#location-variables"><i class="fa fa-check"></i><b>2.1.1</b> Location variables</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-sources.html"><a href="data-sources.html#accident-severity-variables"><i class="fa fa-check"></i><b>2.1.2</b> Accident severity variables</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-sources.html"><a href="data-sources.html#accident-factor-variables"><i class="fa fa-check"></i><b>2.1.3</b> Accident factor variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#data-loading-and-cleaning"><i class="fa fa-check"></i><b>3.1</b> Data loading and cleaning</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#feature-creation"><i class="fa fa-check"></i><b>3.2</b> Feature Creation</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#data-preprocessing"><i class="fa fa-check"></i><b>3.3</b> Data preprocessing</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#motorcycle-accident-missing-pattern"><i class="fa fa-check"></i><b>4.1</b> Motorcycle Accident Missing Pattern</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#how-prevalent-is-collision-in-each-borough"><i class="fa fa-check"></i><b>5.1</b> How prevalent is collision in each borough?</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#will-the-borough-caused-the-contributing-vehicle-factors-behaved-differently"><i class="fa fa-check"></i><b>5.2</b> Will the borough caused the contributing vehicle factors behaved differently?</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#relation-of-the-contributing-factors-or-vehicle-type-code-with-the-people-get-hurt-in-the-collision."><i class="fa fa-check"></i><b>5.3</b> Relation of the contributing factors or vehicle type code with the people get hurt in the collision.</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#valuable-results"><i class="fa fa-check"></i><b>7.1</b> Valuable results</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#data-limitation"><i class="fa fa-check"></i><b>7.2</b> Data Limitation</a></li>
<li class="chapter" data-level="7.3" data-path="conclusion.html"><a href="conclusion.html#future-direction"><i class="fa fa-check"></i><b>7.3</b> Future direction</a></li>
<li class="chapter" data-level="7.4" data-path="conclusion.html"><a href="conclusion.html#project-invokes"><i class="fa fa-check"></i><b>7.4</b> Project invokes</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC-motor-accident</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="data-loading-and-cleaning" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Data loading and cleaning</h2>
<p>Our dataset is first derived from the API using the Python Pandas and save it into a csv file. Then we use the read.csv file to reload it into the data frame df. We could find and see that there are lots of missing values in the dataset therefore we need to carefully handle all these values. We first do some data cleaning. We could find that we have location column which is a pair of the latitude and longitude. Thus, we could simply drop the latitude and longitude to release some memories for our ram since this dataset is really big. Besides, we also choose the data from October to the most recent date to do the analysis since we only care about the general trend of collision with borough area and our ram is limited.</p>
</div>
<div id="feature-creation" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Feature Creation</h2>
<p>We create a new column called <code>real_crash_date</code> since when we find that we can not use the crash_date as the standard to distinguish whether this collision is what we want. Thus, we simply convert this column to another column called real_crash_date which is in the format of year-mon-date and then we could get the data from January to newest.</p>
</div>
<div id="data-preprocessing" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Data preprocessing</h2>
<p>As we said previously, we find that there are so many data that are missing but actually you will find that they are not truly missing. Take the <code>contributing factor vehicle</code> for example, we find that this dataset defines five columns for such factor. However, I believe no more than 95% collisions only up to 2 columns have specific content for this aspect and most collisions does not have more than 2 factors. Our missing value analysis will further evaluate why those values are missing in our dataset. For each collision, it must has at least one factor to cause it to happen. Thus, for the collisions that have at least one contributing factor, we fill 0 to avoid that our missing pattern in next section regarding them as missing values. But for collisions that all 5 factors are missing, we will keep them all as NA values which will be shown in the next missing values section. Similar reason for the vehicle type code. But for all the other columns, I simply keep them as NA if it is blank since they are truly missing.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/zhining4/NYC-motor-accident/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/zhining4/NYC-motor-accident/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
